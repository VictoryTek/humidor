# Humidor v1.3.0 Release Notes

**Release Date**: December 9, 2025

## ğŸ‰ What's New

### Multiple Public Share Links

The biggest feature in this release is the ability to create **multiple public share links** for the same humidor! Previously, you could only have one active public share link per humidor. Now you can:

- **Create unlimited share links** for the same humidor
- **Set different expiration dates** for each link (30 days default, custom date, or never expires)
- **Add optional labels** to help identify each share (e.g., "For John - December 2025")
- **Customize what's included** - Each link can independently include or exclude favorites and wish list
- **Delete individual links** without affecting other shares
- **Copy any link** directly to clipboard with one click

**Why is this useful?**
- Share with different friends with different expiration dates
- Create a permanent link for yourself and temporary links for others  
- Test different sharing configurations
- Revoke individual shares without affecting all of them

### Improved Public Share Experience

When someone visits your public share link, they now see a cleaner interface:

- âœ… Navigation panel only shows relevant sections
- âœ… Settings and Organizers menus are hidden
- âœ… Section title changes to "SHARED VIEW" for clarity
- âœ… Better error messages when links expire or are revoked
- âœ… Expired link page no longer accidentally shows hidden navigation items

### Better Authentication Flow

- Fixed issue where logging in would redirect to setup wizard instead of dashboard
- Setup wizard now properly skips for authenticated users
- Smoother login experience

## ğŸ”§ Technical Details

### Database Changes
- **Migration V17** automatically applied on startup
- Removes single-share-per-humidor limitation
- Adds optional label field to public shares
- **100% backward compatible** - existing shares continue working

### API Updates
New endpoints for managing multiple shares:
- `GET /api/v1/humidors/:id/public-shares` - List all active shares
- `DELETE /api/v1/humidors/:id/public-shares/:token_id` - Delete specific share

Old endpoints still work for backward compatibility.

### Database Migration
The database migration (V17) applies automatically on first startup. No manual intervention required.

**Migration Details:**
- Removes UNIQUE constraint on public shares
- Adds `label` column to `public_humidor_shares` table
- Non-destructive - all existing data preserved

## ğŸ› Bug Fixes

- Fixed expired/revoked share links showing incorrect navigation items
- Removed "Create Account" button from expired share error page
- Fixed public share error page layout issues
- Corrected navigation visibility for expired public shares
- Fixed setup wizard redirect loop for authenticated users
- Fixed Organizers dropdown visibility in public share view

## âš™ï¸ Configuration

No configuration changes required. All new features work out of the box with existing settings.

## ğŸ”’ Security

- No security vulnerabilities addressed in this release
- All authentication and authorization flows remain unchanged

## ğŸ“š Documentation

Updated documentation available in the repository:
- `docs/SHARING.md` - Public share system documentation
- `CHANGELOG.md` - Complete change history
- `docs/API.md` - API endpoint documentation

## ğŸ¤ Compatibility

- **Fully backward compatible** with v1.2.x
- Existing public share links continue to work
- No breaking changes to API or functionality
- All existing features work exactly as before

## ğŸ“ Known Issues

None at this time.

## ğŸ™ Feedback

If you encounter any issues or have suggestions, please:
- Open an issue on GitHub
- Contact via your preferred channel

---

**Full Changelog**: https://github.com/VictoryTek/humidor/blob/main/CHANGELOG.md
