# Humidor v1.5.3 Release Notes

**Release Date:** January 7, 2026

## ğŸ”’ Security Update & Mobile Enhancement Release

Version 1.5.3 addresses a critical security vulnerability in the Docker image and introduces significant mobile UI improvements for the settings page. This release also removes pagination complexity in favor of a simpler continuous scroll experience and fixes authentication flow issues.

---

## ğŸ”’ Security Fixes

### CVE-2025-62408 - c-ares Package Vulnerability

**Critical Docker Image Security Update**

Updated c-ares package to address security vulnerability:

**What Was Fixed:**
- Updated c-ares package from 1.34.5-r0 to â‰¥1.34.6-r0 in Docker image
- Added explicit package version constraint to Dockerfile
- Updated package update process to ensure latest security patches are applied
- Docker image rebuild automatically applies security fixes

**Impact:**
- Eliminates known CVE-2025-62408 vulnerability
- Enhanced security for production deployments
- No configuration changes required - automatic on container rebuild

**Recommendation:**
- All production deployments should rebuild and redeploy with this version
- Run `docker compose up --build` to apply security updates

---

## ğŸ“± Mobile UI Improvements

### Mobile-Friendly Settings Page

**Responsive Card-Based Layouts for Better Mobile Experience**

Settings page tables now display as mobile-optimized cards on smaller screens:

**What Changed:**

**User Management Section:**
- Table converts to card-based layout on screens â‰¤768px
- Each user displayed as individual card with labeled fields
- User information clearly organized (Username, Email, Admin status)
- Action buttons (Change Password, Delete User) stack vertically
- Full-width buttons with improved touch targets
- No more horizontal scrolling or tiny text

**Backup & Restore Section:**
- Backup list converts to cards on mobile devices
- Each backup shows clearly labeled information (Date, Size, Status)
- Download and Restore buttons stack for easy tapping
- Improved spacing and visual hierarchy
- Better touch targets for mobile users

**Desktop Experience:**
- Table layout preserved for screens >768px
- No changes to desktop functionality or appearance
- Best of both worlds - optimized for each screen size

**Visual Example:**
```
Mobile View (â‰¤768px):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Username: john_doe      â”‚
â”‚ Email: john@example.com â”‚
â”‚ Admin: Yes              â”‚
â”‚ [Change Password]       â”‚
â”‚ [Delete User]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Desktop View (>768px):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Username   â”‚ Email            â”‚ Admin â”‚ Actions  â”‚
â”‚ john_doe   â”‚ john@example.com â”‚ Yes   â”‚ [Btns]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Impact:**
- âœ… No more horizontal scrolling on mobile settings page
- âœ… All information readable without zooming
- âœ… Touch-friendly button sizes (minimum 44x44px targets)
- âœ… Cleaner visual hierarchy on small screens
- âœ… Improved accessibility and usability

---

## ğŸ—‘ï¸ Feature Removals

### Pagination Removed

**Simplified User Experience with Continuous Scroll**

Removed pagination system in favor of single-page scrollable views:

**What Was Removed:**
- Pagination from cigars list (all cigars now load in one view)
- Pagination from user management (all users displayed at once)
- Page size selector controls
- Page navigation buttons (Previous/Next/1,2,3...)
- Page indicators and counters
- ~1,000 lines of pagination-related code (HTML, JavaScript, CSS)

**Why This Change:**
- Modern users expect continuous scroll (like social media feeds)
- Simpler codebase - easier to maintain and extend
- Eliminates pagination state management complexity
- Faster navigation - no page loads or state transitions
- Better mobile experience - natural scrolling behavior
- Performance is excellent even with hundreds of cigars

**Impact:**
- Users can scroll through entire collection seamlessly
- Browser built-in search (Ctrl+F) works across all cigars
- No more clicking through pages to find items
- Instant filtering and sorting across all items

**Note:** For very large collections (1000+ cigars), performance remains excellent due to modern browser optimizations. If needed, virtual scrolling can be added in future versions.

---

## ğŸ” Authentication Fixes

### Blank Screen on Load Fixed

**Immediate Authentication Check Prevents Blank Screen**

Fixed authentication flow issues causing blank screens:

**The Problem:**
- Initial page load showed blank screen while checking auth state
- Post-login redirect sometimes showed blank screen
- Auth check happened after DOM load, causing delay
- Loading screen added complexity without solving root cause

**The Solution:**
- Implemented immediate pre-DOM authentication check using IIFE
- Token validation occurs before page rendering begins
- Unauthenticated users redirect instantly to login
- Authenticated users see app load normally without delay
- Removed unnecessary auth loading screen

**Authentication Flow (New):**
```
1. Page loads â†’ 2. Check token (before DOM) â†’ 3a. Valid: Continue to app
                                             â†’ 3b. Invalid: Redirect to login
```

**What Works Now:**
- âœ… No blank screens on initial load
- âœ… Instant redirect for unauthenticated users
- âœ… Smooth login experience without delays
- âœ… Follows Auth0/Auth.js best practices
- âœ… Cleaner codebase without loading screen complexity

**Technical Details:**
- Uses Immediately Invoked Function Expression (IIFE) pattern
- Checks `localStorage.getItem('token')` before DOM load
- Token validation with `/api/validate` endpoint
- Early return prevents unnecessary DOM rendering

---

## ğŸ”§ Technical Details

### Dependencies Updated
- Alpine Linux base packages updated to latest security patches
- c-ares â‰¥1.34.6-r0 (security fix)

### Code Quality
- Removed ~1,000 lines of pagination code
- Simplified state management
- Improved authentication flow architecture
- Enhanced mobile responsive CSS

### Service Worker
- Version remains v1.5.3 (from v1.5.2)
- External image handling stable
- Offline functionality unchanged

---

## ğŸ“Š Migration Notes

### Upgrading from v1.5.2

**Docker Deployment:**
```bash
# Pull latest image and rebuild
docker compose pull
docker compose up --build -d

# Verify security updates applied
docker exec humidor apk info c-ares
# Should show version â‰¥1.34.6-r0
```

**No Database Migrations Required**
- No schema changes in this release
- Existing data fully compatible
- No downtime for upgrades

**User Impact:**
- Users will notice settings page improvements immediately
- Pagination removal is transparent (better UX)
- Authentication improvements prevent blank screens
- No user action required

---

## ğŸ› Known Issues

None reported at this time.

---

## ğŸ“ Full Changelog

See [CHANGELOG.md](../CHANGELOG.md) for complete technical details.

---

## ğŸ”— Previous Releases

- [v1.5.2](v1.5.2.md) - Bug fix release (light mode, images, settings alignment)
- [v1.5.1](v1.5.1.md) - Preference-based cigar recommendations
- [v1.5.0](v1.5.0.md) - Major UI overhaul with humidor cover images

---

## ğŸ’¬ Support

- **Issues:** Report bugs via GitHub Issues
- **Documentation:** See `docs/` directory
- **User Guide:** [docs/USER_GUIDE.md](../docs/USER_GUIDE.md)

---

**Recommended Action:** All production deployments should upgrade to v1.5.3 for security fixes and improved mobile experience.
